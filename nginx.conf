events {
    worker_connections 1024;
}

http {
    upstream node-api {
        server node-api:3000;
    }

    upstream kotlin-api {
        server kotlin-api:8080;
    }

    server {
        listen 7001;

        location /uploads {
            proxy_pass http://node-api;
        }

        location / {
            proxy_pass http://kotlin-api;
        }
    }
}
